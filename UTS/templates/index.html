<!DOCTYPE html>
<html lang="id">

<head>
    <meta charset="UTF-8">
    <title>Daftar Emas - Toko Sinar Jaya</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
</head>

<body class="bg-light">
    <div class="container mt-5">
        <div class="card shadow p-4">
            <h2 class="text-center fw-bold mb-4 text-warning">Daftar Emas - Toko Sinar Jaya</h2>

            <form method="GET" class="d-flex mb-3">
                <input type="text" name="search" value="{{ search }}" class="form-control me-2"
                    placeholder="Cari nama emas...">
                <button class="btn btn-primary">Cari</button>
            </form>

            <a href="{{ url_for('add_file') }}" class="btn btn-success mb-3">+ Tambah Emas</a>

            <table class="table table-bordered text-center align-middle">
                <thead class="table-warning">
                    <tr>
                        <th>Kode</th>
                        <th>Nama Emas</th>
                        <th>Harga (Rp)</th>
                        <th>Foto</th>
                        <th>Aksi</th>
                    </tr>
                </thead>
                <tbody>
                    {% for row in files %}
                    <tr>
                        <td>{{ row[0] }}</td>
                        <td>{{ row[1] }}</td>
                        <td>{{ "{:,.0f}".format(row[2]|float) }}</td>
                        <td>
                            {% if row[3] %}
                            <img src="{{ url_for('uploaded_file', filename=row[3]) }}" width="100" height="100"
                                class="rounded shadow-sm">
                            {% else %}
                            <img src="{{ url_for('static', filename='no-image.png') }}" width="100" height="100"
                                class="rounded shadow-sm">
                            {% endif %}
                        </td>
                        <td>
                            <a href="{{ url_for('edit_file', id=row[0]) }}" class="btn btn-warning btn-sm me-1">Edit</a>
                            <a href="{{ url_for('delete_file', id=row[0]) }}" class="btn btn-danger btn-sm"
                                onclick="return confirm('Yakin ingin menghapus data ini?')">Hapus</a>
                        </td>
                    </tr>
                    {% else %}
                    <tr>
                        <td colspan="5" class="text-muted">Belum ada data emas.</td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>

            <!-- PAGINATION DENGAN NEXT & PREVIOUS -->
            <nav>
                <ul class="pagination justify-content-center">

                    <!-- Nomor Halaman -->
                    {% for i in range(1, total_pages + 1) %}
                    <li class="page-item {% if i == page %}active{% endif %}">
                        <a class="page-link" href="?page={{ i }}&search={{ search }}">{{ i }}</a>
                    </li>
                    {% endfor %}

                    <!-- Tombol Next -->
                    <li class="page-item {% if page == total_pages %}disabled{% endif %}">
                        <a class="page-link"
                            href="?page={{ page + 1 if page < total_pages else total_pages }}&search={{ search }}">Next</a>
                    </li>
                </ul>
            </nav>

        </div>
    </div>
</body>

</html>